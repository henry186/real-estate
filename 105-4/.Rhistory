setwd("~/real-estate")
install.packages("XML")
library(XML)
107<-xmlParse("106人口數.xml")
people<-xmlParse("106人口數.xml")
people<-xmlParse("106人口數.xls")
install.packages("readxl")
library(readxl)
x<-read_xls("106人口數.xls")
View(x)
source('~/real-estate/Taiwan-estate.r')
install.packages("readxl")
source('~/real-estate/Taiwan-estate.r')
source('~/real-estate/Taiwan-estate.r')
source('~/real-estate/Taiwan-estate.r')
View(taiwan)
source('~/real-estate/Taiwan-estate.r')
View(taiwan)
source('~/real-estate/Taiwan-estate.r')
View(taiwanmap)
priceMean<-ddply(taiwan,.(id),summarize,mean = round(mean(PricePerSqrtm,na.rm = T)))
縣市 <-c("臺北市","臺中市","基隆市","臺南市","高雄市","新北市","宜蘭縣","桃園市","嘉義市","新竹縣","苗栗縣","南投縣","彰化縣","新竹市","雲林縣","嘉義縣","屏東縣","花蓮縣","臺東縣","金門縣","澎湖縣","連江縣")
priceMean <- data.frame("縣市"=縣市,priceMean)
ggplot(priceMean,aes(mean,縣市))+geom_col(position = "dodge")+labs(x="每平方公尺平均價格")
houseuse <- data.frame("price"=round(taiwan$PricePerSqrtm,-4),"交易標的"=taiwan$交易標的)
ggplot(houseuse,aes(price,fill=交易標的))+geom_histogram(stat = "count",position = "fill")+labs(x="每平方公尺價格",y="交易標的比例")+xlim(0,400000)+scale_y_continuous(breaks = c(0,0.25,0.5,0.75,1),labels=c("0%","25%","50%","75%","100%"))
sqrtm <- round(taiwan$總價元 / taiwan$PricePerSqrtm, -1)
buildt <- difftime(taiwan$交易年月日,taiwan$建築完成年月)
buildt <- substr(buildt,1,4)
sqpr <- data.frame("id"=taiwan$id, "price"=taiwan$PricePerSqrtm ,"坪數"=sqrtm)
sqpr <- sqpr%>%filter(坪數<8000)
sqpr <- sqpr%>%filter(price<400000)
ggplot(sqpr,aes(坪數,price,fill=id))+geom_point(shape=23)+scale_fill_discrete(name="縣市",labels=縣市)
source('~/real-estate/Taiwan-estate.r')
taiwan<-taiwan%>%filter(建物現況格局.房!="0")
View(taiwan)
priceMean<-ddply(taiwan,.(id),summarize,mean = round(mean(PricePerSqrtm,na.rm = T)))
縣市 <-c("臺北市","臺中市","基隆市","臺南市","高雄市","新北市","宜蘭縣","桃園市","嘉義市","新竹縣","苗栗縣","南投縣","彰化縣","新竹市","雲林縣","嘉義縣","屏東縣","花蓮縣","臺東縣","金門縣","澎湖縣","連江縣")
priceMean <- data.frame("縣市"=縣市,priceMean)
ggplot(priceMean,aes(mean,縣市))+geom_col(position = "dodge")+labs(x="每平方公尺平均價格")
houseuse <- data.frame("price"=round(taiwan$PricePerSqrtm,-4),"交易標的"=taiwan$交易標的)
ggplot(houseuse,aes(price,fill=交易標的))+geom_histogram(stat = "count",position = "fill")+labs(x="每平方公尺價格",y="交易標的比例")+xlim(0,400000)+scale_y_continuous(breaks = c(0,0.25,0.5,0.75,1),labels=c("0%","25%","50%","75%","100%"))
sqrtm <- round(taiwan$總價元 / taiwan$PricePerSqrtm, -1)
buildt <- difftime(taiwan$交易年月日,taiwan$建築完成年月)
buildt <- substr(buildt,1,4)
sqpr <- data.frame("id"=taiwan$id, "price"=taiwan$PricePerSqrtm ,"坪數"=sqrtm)
sqpr <- sqpr%>%filter(坪數<8000)
sqpr <- sqpr%>%filter(price<400000)
ggplot(sqpr,aes(坪數,price,fill=id))+geom_point(shape=23)+scale_fill_discrete(name="縣市",labels=縣市)
b<-taiwan$建築完成年月
taiwan$交易年月日<-paste(substr(b,1,4),substr(b,5,6)
,substr(b,7,8),sep="")
taiwan[7]<-as.Date(taiwan[[7]])
View(taiwan)
source('~/real-estate/Taiwan-estate.r')
source('~/real-estate/Taiwan-estate.r')
source('~/real-estate/Taiwan-estate.r')
source('~/real-estate/Taiwan-estate.r')
View(taiwan)
taiwan<-taiwan%>%filter(taiwan!="0")
View(taiwan)
taiwan<-taiwan%>%filter(taiwan$建物現況格局.房!="0")
ggplot(taiwan,aes(id,fill=name))+geom_histogram(stat = "count")
ggplot(taiwan,aes(id,fill=name))+geom_histogram(stat = "count",position = "fill")
ggplot(taiwan,aes(id="A",fill=name))+geom_histogram(stat = "count")
ggplot(taiwan,aes(id))+geom_histogram(stat = "count")
ggplot(taiwan,aes(id))+geom_histogram(stat = "count",position = "fill")
ggplot(taiwan,aes(id,fill=name))+geom_histogram(stat = "count",position = "fill")
ggplot(taiwan,aes(id,fill=交易年月日))+geom_histogram(stat = "count",position = "fill")
ggplot(taiwan,aes(id,fill=總樓層數))+geom_histogram(stat = "count",position = "fill")
taiwan<-taiwan%>%filter(taiwan$總樓層數!=""
|taiwan$總樓層數!="(空白)"
|taiwan$總樓層數!="000"
|taiwan$總樓層數!="043"
|taiwan$總樓層數!="見使用執照"
|taiwan$總樓層數!="見其他登記事項")
ggplot(taiwan,aes(id,fill=總樓層數))+geom_histogram(stat = "count",position = "fill")
View(taiwan)
table(總樓層數)
table(taiwan$總樓層數)
taiwan<-taiwan%>%filter(taiwan$總樓層數!=""
|taiwan$總樓層數!="(空白)"
|taiwan$總樓層數!="000"
|taiwan$總樓層數!="043"
|taiwan$總樓層數!="見使用執照"
|taiwan$總樓層數!="見其他登記事項")
View(taiwan)
table(taiwan$總樓層數)
taiwan<-taiwan%>%filter(taiwan$總樓層數!="")
table(taiwan$總樓層數)
taiwan<-taiwan%>%filter(taiwan$總樓層數!=""
&taiwan$總樓層數!="(空白)"
&taiwan$總樓層數!="000"
&taiwan$總樓層數!="043"
&taiwan$總樓層數!="見使用執照"
&taiwan$總樓層數!="見其他登記事項")
table(taiwan$總樓層數)
ggplot(taiwan,aes(id,fill=總樓層數))+geom_histogram(stat = "count",position = "fill")
ggplot(taiwan,aes(id,fill=總樓層數))+geom_histogram(stat = "count",position = "fill")+labs(x="縣市",y="樓層數比例")+scale_y_continuous(breaks = c(0,0.25,0.5,0.75,1),labels=c("0%","25%","50%","75%","100%"))
priceMean<-ddply(taiwan,.(id),summarize,mean = round(mean(PricePerSqrtm,na.rm = T)))
priceMax<-ddply(taiwan,.(id),summarise,max=max(PricePerSqrtm,na.rm = T))
priceMin<-ddply(taiwan,.(id),summarise,min=min(PricePerSqrtm,na.rm = T))
縣市 <-c("臺北市","臺中市","基隆市","臺南市","高雄市","新北市","宜蘭縣","桃園市","嘉義市","新竹縣","苗栗縣","南投縣","彰化縣","新竹市","雲林縣","嘉義縣","屏東縣","花蓮縣","臺東縣","金門縣","澎湖縣","連江縣")
priceMean <- data.frame("縣市"=縣市,priceMean)
priceMax <- data.frame("縣市"=縣市,priceMax)
priceMin <- data.frame("縣市"=縣市,priceMin)
anprice<- c(priceMean,priceMax,priceMin)
View(anprice)
View(priceMax)
View(priceMean)
View(priceMin)
anprice<- c(priceMean$mean,priceMax$max,priceMin$min)
anprice
pricedf<- data.frame("縣市"=縣市,"房價"=anprice)
View(pricedf)
pricedf<- data.frame("縣市"=rep(縣市,times=3),"房價"=anprice)
View(pricedf)
pricedf<- data.frame("縣市"=rep(縣市,times=3),"房價"=anprice,"ann"=rep(c("Mean","Max","Min")))
View(pricedf)
pricedf<- data.frame("縣市"=rep(縣市,times=3),"房價"=anprice,"ann"=c(rep("Mean",times=22),rep("Max",times=22),rep("Min",times=22)))
View(pricedf)
ggplot(pricedf,aes(縣市,房價,fill=ann))+geom_col(position = "dodge")
taiwan<-taiwan%>%filter(taiwan$PricePerSqrtm!="0")
taiwan<-taiwan%>%filter(taiwan$PricePerSqrtm!=0)
priceMean<-ddply(taiwan,.(id),summarize,mean = round(mean(PricePerSqrtm,na.rm = T)))
priceMax<-ddply(taiwan,.(id),summarise,max=max(PricePerSqrtm,na.rm = T))
priceMin<-ddply(taiwan,.(id),summarise,min=min(PricePerSqrtm,na.rm = T))
縣市 <-c("臺北市","臺中市","基隆市","臺南市","高雄市","新北市","宜蘭縣","桃園市","嘉義市","新竹縣","苗栗縣","南投縣","彰化縣","新竹市","雲林縣","嘉義縣","屏東縣","花蓮縣","臺東縣","金門縣","澎湖縣","連江縣")
priceMean <- data.frame("縣市"=縣市,priceMean)
priceMax <- data.frame("縣市"=縣市,priceMax)
priceMin <- data.frame("縣市"=縣市,priceMin)
anprice<- c(priceMean$mean,priceMax$max,priceMin$min)
pricedf<- data.frame("縣市"=rep(縣市,times=3),"房價"=anprice,"ann"=c(rep("Mean",times=22),rep("Max",times=22),rep("Min",times=22)))
ggplot(pricedf,aes(縣市,房價,fill=ann))+geom_col(position = "dodge")
View(priceMin)
tradesum<-ddply(taiwan,.(id),summarise,sum=sum(PricePerSqrtm!=0,na.rm = T))
View(tradesum)
tradesum <- data.frame("縣市"=縣市,tradesum)
View(tradesum)
ggplot(tradesum,aes(縣市,sum))+geom_col()
View(taiwan)
ggplot(tradesum,aes(縣市,sum))+geom_col()+labs(y="件數")
source('~/real-estate/Taiwan-estate.r')
source('~/real-estate/Taiwan-estate.r')

source('~/real-estate/Taiwan-estate.r', encoding = 'UTF-8')
View(taiwan)
View(taiwan)
a<-ReadFile(1)
View(a)
ReadAllFile(4,108)
a<-ReadAllFile(4,108)
View(a)
a<-adply(1:26,.margins = 1,.fun = ReadFile
)
View(a)
ReadAllFile <- function(i,year)
{
path<-paste("../",year,"-",i,sep = "")
if(file.exists(path))
{
setwd(path)
cat("file1",year,"-",i,"\n")
return(adply(1:26,.margins = 1,.fun = ReadFile)[-1])
}
else
cat(year,"-",i,"doesn't exsist\n")
}
a<-adply(1:26,.margins = 1,.fun = ReadFile)[-1]
View(a)
year<-108
readyear(108)
a<-readyear(108)
View(a)
source('~/real-estate/Taiwan-estate.r', encoding = 'UTF-8')
View(taiwan)
year<-108
taiwan<-adply(1:4,.margins = 1,.fun = ReadAllFile,year=year)
View(taiwan)
View(taiwan)
View(taiwan)
ReadAllFile <- function(i,year)
{
path<-paste("../",year,"-",i,sep = "")
if(file.exists(path))
{
setwd(path)
cat("file1",year,"-",i,"\n")
return(adply(1:26,.margins = 1,.fun = ReadFile)[-1])
}
else
cat(year,"-",i,"doesn't exsist\n")
}
taiwan<-adply(1:4,.margins = 1,.fun = ReadAllFile,year=year)
View(taiwan)
taiwan<-taiwan%>%filter(交易標的=="房地(土地+建物)"|交易標的=="房地(土地+建物)+車位"|
交易標的=="建物")
taiwan <-taiwan[c(2 , 3 , 24 , 25 , 4 , 10 , 17 , 11 , 12 , 13 , 14 ,
15 , 18 , 19 , 20 , 21 , 22 , 23 , 26 , 27 , 28)]
View(taiwan)
colnames(taiwan)[c(2,4)]<-c("name","PricePerSqrtm")
taiwan[3]<- as.numeric(taiwan[[3]])
taiwan[4]<- as.numeric((taiwan[[4]]))
taiwan[6]<- as.numeric(taiwan[[6]])+19110000
taiwan[7]<- as.numeric(taiwan[[7]])+19110000
taiwan[13]<-as.numeric(taiwan[[13]])
#transfirm to class date
a<-taiwan$交易年月日
taiwan$交易年月日<-paste(substr(a,1,4),substr(a,5,6),substr(a,7,8),sep="-")
taiwan[6]<-as.Date(taiwan[[6]])
return(na.omit(taiwan))
source('~/real-estate/Taiwan-estate.r', encoding = 'UTF-8')
View(taiwan)
taiwan <- adply(107:109,.margins = 1,.fun=readyear)[-1]
View(taiwan)
a<-substr(taiwan$交易年月日)
a<-substr(taiwan$交易年月日,start=1,end=4)
a<2018-9-30
a<-as.Date("2018-9-30")
year(a)
y
y(a)
?Date
substr(a,1,4)
a<-substr(taiwan$交易年月日,1,4)
table(a)
ReadAllFile(4,108)
t<-ReadAllFile(1,108)
table(t)
b<-substr(t$交易年月日,1,3)
table(b)
x<-t[t$id=="X",]
c<-substr(x$交易年月日,1,3)
table(c)
table(substr(t[t$id=="A",]$交易年月日,1,3))
table(substr(t[t$id=="B",]$交易年月日,1,3))
table(substr(t[t$id=="X",]$交易年月日,1,3))
table(substr(t[t$id=="D",]$交易年月日,1,3))
table(substr(t[t$id=="C",]$交易年月日,1,3))
table(substr(t[t$id=="E",]$交易年月日,1,3))
table(substr(t[t$id=="F",]$交易年月日,1,3))
table(substr(t[t$id=="G",]$交易年月日,1,3))
table(substr(t[t$id=="H",]$交易年月日,1,3))
table(substr(t[t$id=="I",]$交易年月日,1,3))
table(substr(t[t$id=="J",]$交易年月日,1,3))
table(substr(t[t$id=="K",]$交易年月日,1,3))
table(substr(t[t$id=="M",]$交易年月日,1,3))
table(substr(t[t$id=="N",]$交易年月日,1,3))
table(substr(t[t$id=="O",]$交易年月日,1,3))
table(substr(t[t$id=="P",]$交易年月日,1,3))
table(substr(t[t$id=="Q",]$交易年月日,1,3))
q<-t[t$id=="Q",]
View(q)
View(x)
View(q)
q2<-ReadFile(17)
View(q2)
View(q)
View(q2)
View(t)
View(x)
View(q2)
q2<-ReadFile(17)
View(q2)
taiwan<-readyear(108)
table(substr(taiwan$交易年月日,1,4))
taiwan<-readyear(107)
table(substr(taiwan$交易年月日,1,4))
taiwan<-readyear(106)
setwd("../107-1")
setwd("../108-1")
setwd("../108-1")
taiwan<-readyear(107)
table(substr(taiwan$交易年月日,1,4))
table(substr(taiwan$主要用途))
table(taiwan$主要用途)
table(taiwan$有無管理組織)
taiwan<-readyear(106)
ReadAllFile(1,106)
x<-ReadFile(24)
w<-ReadFile(23)
x<-ReadFile(24)
x<-read.table(filename,header = F,sep=",",
quote = "",
row.names = NULL,
fill= T,fileEncoding="UTF-8-BOM",
stringsAsFactors = F)
x<-read.table(X_lvr_land_A.csv,header = F,sep=",",
quote = "",
row.names = NULL,
fill= T,fileEncoding="UTF-8-BOM",
stringsAsFactors = F)
x<-read.table("X_lvr_land_A.csv",header = F,sep=",",
quote = "",
row.names = NULL,
fill= T,fileEncoding="UTF-8-BOM",
stringsAsFactors = F)
View(x)
x[1,]
a<-x[1,]
View(t)
b<-colnames(t)
a
b
as.character(a)
rm(q)
rm(q2)
View(a)
View(w)
rm(w)
x<-ReadFile(24)
View(x)
taiwan<-readyear(106)
table(substr(taiwan$交易年月日,1,4))
table(taiwan$主要用途)
table(taiwan$建物型態)
table(taiwan$建物現況格局.隔間)
taiwan<-readyear(105)
taiwan<-readyear(105)
rm(a)
rm(t)
rm(x)
rm(b)
rm(c)
table(substr(taiwan$交易年月日,1,4))
table(taiwan$建物型態)
table(taiwan$主要用途)
table(taiwan$建物現況格局.隔間)
taiwan<-readyear(1043)
taiwan<-readyear(104)
table(substr(taiwan$交易年月日,1,4))
table(taiwan$建物型態)
table(taiwan$主要用途)
table(taiwan$建物現況格局.隔間)
taiwan<-readyear(109)
table(substr(taiwan$交易年月日,1,4))
table(taiwan$建物型態)
table(taiwan$主要用途)
table(taiwan$建物現況格局.隔間)
taiwan <- adply(103:109,.margins = 1,.fun=readyear)[-1]
View(taiwan)
table(substr(taiwan$交易年月日,1,4))
year<-105
taiwan<-adply(1:4,.margins = 1,.fun = ReadAllFile,year=year)
taiwan<-taiwan%>%filter(交易標的=="房地(土地+建物)"
|交易標的=="房地(土地+建物)+車位"
|交易標的=="建物")
taiwan<-taiwan%>%filter(交易年月日>103)
taiwan <-taiwan[c(2 , 3 , 24 , 25 , 4 , 10 , 17 , 11 , 12 , 13 , 14 ,
15 , 18 , 19 , 20 , 21 , 22 , 23 , 26 , 27 , 28)]
colnames(taiwan)[c(2,4)]<-c("name","PricePerSqrtm")
taiwan[3]<- as.numeric(taiwan[[3]])
taiwan[4]<- as.numeric((taiwan[[4]]))
taiwan[6]<- as.numeric(taiwan[[6]])+19110000
taiwan[7]<- as.numeric(taiwan[[7]])+19110000
taiwan[13]<-as.numeric(taiwan[[13]])
table(substr(taiwan$交易年月日,1,4))
taiwan<-taiwan%>%filter(交易年月日>=2014-1-1)
table(substr(taiwan$交易年月日,1,4))
a<-as.Date("2014-1-1")
2015-1-1>=a
taiwan<-taiwan%>%filter(交易年月日>=as.Date("2014-1-1"))
table(substr(taiwan$交易年月日,1,4))
taiwan<-taiwan%>%filter(交易年月日>=20140101)
table(substr(taiwan$交易年月日,1,4))
taiwan <- adply(103:109,.margins = 1,.fun=readyear)[-1]
table
table(substr(taiwan$交易年月日,1,4))
taiwan<-taiwan%>%filter(交易年月日>=as.Date("2014-1-1"))
table(substr(taiwan$交易年月日,1,4))
table(taiwan$交易標的)
#read estate data and clean up the data
readyear<-function(year)
{
taiwan<-adply(1:4,.margins = 1,.fun = ReadAllFile,year=year)
taiwan <-taiwan[c(2 , 3 , 24 , 25 , 4 , 10 , 17 , 11 , 12 , 13 , 14 ,
15 , 18 , 19 , 20 , 21 , 22 , 23 , 26 , 27 , 28)]
colnames(taiwan)[c(2,4)]<-c("name","PricePerSqrtm")
taiwan[3]<- as.numeric(taiwan[[3]])
taiwan[4]<- as.numeric((taiwan[[4]]))
taiwan[6]<- as.numeric(taiwan[[6]])+19110000
taiwan[7]<- as.numeric(taiwan[[7]])+19110000
taiwan[13]<-as.numeric(taiwan[[13]])
#taiwan<-taiwan%>%filter(交易標的=="房地(土地+建物)"
#                            |交易標的=="房地(土地+建物)+車位"
#                            |交易標的=="建物")
#taiwan<-taiwan%>%filter(交易年月日>=20140101)
#transfirm to class date
a<-taiwan$交易年月日
taiwan$交易年月日<-paste(substr(a,1,4),substr(a,5,6)
,substr(a,7,8),sep="-")
taiwan[6]<-as.Date(taiwan[[6]])
return(na.omit(taiwan))
}
#read estate data and clean up the data
readyear<-function(year)
{
taiwan<-adply(1:4,.margins = 1,.fun = ReadAllFile,year=year)
taiwan <-taiwan[c(2 , 3 , 24 , 25 , 4 , 10 , 17 , 11 , 12 , 13 , 14 ,
15 , 18 , 19 , 20 , 21 , 22 , 23 , 26 , 27 , 28)]
colnames(taiwan)[c(2,4)]<-c("name","PricePerSqrtm")
taiwan[3]<- as.numeric(taiwan[[3]])
taiwan[4]<- as.numeric((taiwan[[4]]))
taiwan[6]<- as.numeric(taiwan[[6]])+19110000
taiwan[7]<- as.numeric(taiwan[[7]])+19110000
taiwan[13]<-as.numeric(taiwan[[13]])
#taiwan<-taiwan%>%filter(交易標的=="房地(土地+建物)"
#                            |交易標的=="房地(土地+建物)+車位"
#                            |交易標的=="建物")
taiwan<-taiwan%>%filter(交易年月日>=20140101)
#transfirm to class date
a<-taiwan$交易年月日
taiwan$交易年月日<-paste(substr(a,1,4),substr(a,5,6)
,substr(a,7,8),sep="-")
taiwan[6]<-as.Date(taiwan[[6]])
return(na.omit(taiwan))
}
taiwan <- adply(103:109,.margins = 1,.fun=readyear)[-1]
table(substr(taiwan$交易年月日,1,4))
table(taiwan$交易標的)
taiwan<-taiwan%>%filter(交易標的=="房地(土地+建物)"
|交易標的=="房地(土地+建物)+車位"
|交易標的=="建物")
table(taiwan$交易標的)
View(taiwan)
taiwan$主要用途
table(taiwan$主要用途)
table(taiwan$主要用途)
taiwan<-taiwan%>%filter(主要用途=="住宅"
|主要用途=="住宅用"
|主要用途=="住房"
|主要用途=="住家用"
|主要用途=="住商用"
|主要用途=="住工用"
|主要用途=="見其他登記事項"
|主要用途=="見其它登記事項"
|主要用途=="店舖、住宅"
|主要用途=="國民住宅"
|主要用途=="集合住宅")
table(taiwan$主要用途)
